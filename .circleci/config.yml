version: 2.1

orbs:
  maven: circleci/maven@0.0.12

workflows:
  workflows:
    maven_test:
    jobs:
      - maven/test:
          command: 'clean test -Denv=${env}'
      - run:
          name: Save test results
          command: |
            mkdir -p ~/cucumber
            bundle exec cucumber --format junit --out ~/cucumber/junit.xml
          when: always
      - store_test_results:
          path: ~/cucumber
      - store_artifacts:
          path: ~/cucumber
          
